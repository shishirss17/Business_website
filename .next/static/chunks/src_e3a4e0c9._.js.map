{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/manav/studio/src/components/checkout/checkout-form.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport {\n    PaymentElement,\n    useStripe,\n    useElements,\n} from \"@stripe/react-stripe-js\";\nimport { Button } from \"@/components/ui/button\";\nimport { useCart } from \"@/lib/cart-context\";\nimport { Loader2 } from \"lucide-react\";\nimport { useToast } from \"@/hooks/use-toast\"; // Adjust import path if needed\nimport { useRouter } from \"next/navigation\";\n\nexport function CheckoutForm() {\n    const stripe = useStripe();\n    const elements = useElements();\n    const { state } = useCart(); // to maybe clear cart later\n    const [message, setMessage] = useState<string | null>(null);\n    const [isLoading, setIsLoading] = useState(false);\n    const { toast } = useToast();\n    const router = useRouter();\n\n    useEffect(() => {\n        if (!stripe) {\n            return;\n        }\n\n        const clientSecret = new URLSearchParams(window.location.search).get(\n            \"payment_intent_client_secret\"\n        );\n\n        if (!clientSecret) {\n            return;\n        }\n\n        stripe.retrievePaymentIntent(clientSecret).then(({ paymentIntent }) => {\n            switch (paymentIntent?.status) {\n                case \"succeeded\":\n                    setMessage(\"Payment succeeded!\");\n                    toast({ title: \"Payment Succeeded!\", description: \"Thank you for your order.\" });\n                    // In a real app, you would clear the cart here or on a success page\n                    break;\n                case \"processing\":\n                    setMessage(\"Your payment is processing.\");\n                    break;\n                case \"requires_payment_method\":\n                    setMessage(\"Your payment was not successful, please try again.\");\n                    break;\n                default:\n                    setMessage(\"Something went wrong.\");\n                    break;\n            }\n        });\n    }, [stripe]);\n\n    const handleSubmit = async (e: React.FormEvent<HTMLFormElement>) => {\n        e.preventDefault();\n\n        if (!stripe || !elements) {\n            return;\n        }\n\n        setIsLoading(true);\n\n        const { error } = await stripe.confirmPayment({\n            elements,\n            confirmParams: {\n                // Make sure to change this to your payment completion page\n                return_url: `${window.location.origin}/checkout`,\n            },\n        });\n\n        if (error.type === \"card_error\" || error.type === \"validation_error\") {\n            setMessage(error.message ?? \"An unexpected error occurred.\");\n        } else {\n            setMessage(\"An unexpected error occurred.\");\n        }\n\n        setIsLoading(false);\n    };\n\n    return (\n        <form id=\"payment-form\" onSubmit={handleSubmit}>\n            <PaymentElement id=\"payment-element\" options={{ layout: \"tabs\" }} />\n            {message && <div id=\"payment-message\" className=\"text-red-500 mt-2 text-sm\">{message}</div>}\n            <Button disabled={isLoading || !stripe || !elements} id=\"submit\" className=\"w-full mt-4\">\n                {isLoading ? (\n                    <>\n                        <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n                        Processing...\n                    </>\n                ) : (\n                    \"Pay now\"\n                )}\n            </Button>\n        </form>\n    );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAKA;AACA;AACA;AACA,6NAA8C,+BAA+B;AAC7E;;;AAZA;;;;;;;;AAcO,SAAS;;IACZ,MAAM,SAAS,IAAA,oMAAS;IACxB,MAAM,WAAW,IAAA,sMAAW;IAC5B,MAAM,EAAE,KAAK,EAAE,GAAG,IAAA,4IAAO,KAAI,4BAA4B;IACzD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAgB;IACtD,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAC;IAC3C,MAAM,EAAE,KAAK,EAAE,GAAG,IAAA,2IAAQ;IAC1B,MAAM,SAAS,IAAA,kJAAS;IAExB,IAAA,0KAAS;kCAAC;YACN,IAAI,CAAC,QAAQ;gBACT;YACJ;YAEA,MAAM,eAAe,IAAI,gBAAgB,OAAO,QAAQ,CAAC,MAAM,EAAE,GAAG,CAChE;YAGJ,IAAI,CAAC,cAAc;gBACf;YACJ;YAEA,OAAO,qBAAqB,CAAC,cAAc,IAAI;0CAAC;wBAAC,EAAE,aAAa,EAAE;oBAC9D,OAAQ,0BAAA,oCAAA,cAAe,MAAM;wBACzB,KAAK;4BACD,WAAW;4BACX,MAAM;gCAAE,OAAO;gCAAsB,aAAa;4BAA4B;4BAE9E;wBACJ,KAAK;4BACD,WAAW;4BACX;wBACJ,KAAK;4BACD,WAAW;4BACX;wBACJ;4BACI,WAAW;4BACX;oBACR;gBACJ;;QACJ;iCAAG;QAAC;KAAO;IAEX,MAAM,eAAe,OAAO;QACxB,EAAE,cAAc;QAEhB,IAAI,CAAC,UAAU,CAAC,UAAU;YACtB;QACJ;QAEA,aAAa;QAEb,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,OAAO,cAAc,CAAC;YAC1C;YACA,eAAe;gBACX,2DAA2D;gBAC3D,YAAY,AAAC,GAAyB,OAAvB,OAAO,QAAQ,CAAC,MAAM,EAAC;YAC1C;QACJ;QAEA,IAAI,MAAM,IAAI,KAAK,gBAAgB,MAAM,IAAI,KAAK,oBAAoB;gBACvD;YAAX,WAAW,CAAA,iBAAA,MAAM,OAAO,cAAb,4BAAA,iBAAiB;QAChC,OAAO;YACH,WAAW;QACf;QAEA,aAAa;IACjB;IAEA,qBACI,6LAAC;QAAK,IAAG;QAAe,UAAU;;0BAC9B,6LAAC,yMAAc;gBAAC,IAAG;gBAAkB,SAAS;oBAAE,QAAQ;gBAAO;;;;;;YAC9D,yBAAW,6LAAC;gBAAI,IAAG;gBAAkB,WAAU;0BAA6B;;;;;;0BAC7E,6LAAC,+IAAM;gBAAC,UAAU,aAAa,CAAC,UAAU,CAAC;gBAAU,IAAG;gBAAS,WAAU;0BACtE,0BACG;;sCACI,6LAAC,+NAAO;4BAAC,WAAU;;;;;;wBAA8B;;mCAIrD;;;;;;;;;;;;AAKpB;GApFgB;;QACG,oMAAS;QACP,sMAAW;QACV,4IAAO;QAGP,2IAAQ;QACX,kJAAS;;;KAPZ","debugId":null}},
    {"offset": {"line": 162, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/manav/studio/src/components/checkout/stripe-elements-wrapper.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { loadStripe } from \"@stripe/stripe-js\";\r\nimport { Elements } from \"@stripe/react-stripe-js\";\r\nimport { CheckoutForm } from \"./checkout-form\";\r\nimport { useCart } from \"@/lib/cart-context\";\r\nimport { Loader2 } from \"lucide-react\";\r\n\r\n// Make sure to call loadStripe outside of a componentâ€™s render to avoid\r\n// recreating the Stripe object on every render.\r\nconst stripePromise = loadStripe(process.env.NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY!);\r\n\r\nexport default function StripeElementsWrapper() {\r\n    const [clientSecret, setClientSecret] = useState(\"\");\r\n    const { state } = useCart();\r\n    const [error, setError] = useState(\"\");\r\n\r\n    useEffect(() => {\r\n        if (state.items.length === 0) return;\r\n\r\n        // Create PaymentIntent as soon as the page loads\r\n        fetch(\"/api/create-payment-intent\", {\r\n            method: \"POST\",\r\n            headers: { \"Content-Type\": \"application/json\" },\r\n            body: JSON.stringify({ items: state.items.map(i => ({ id: i.product.id, quantity: i.quantity })) }),\r\n        })\r\n            .then((res) => {\r\n                if (!res.ok) throw new Error(\"Failed to initialize payment\");\r\n                return res.json();\r\n            })\r\n            .then((data) => setClientSecret(data.clientSecret))\r\n            .catch((err) => setError(err.message));\r\n    }, [state.items]);\r\n\r\n    if (state.items.length === 0) {\r\n        return <div>Your cart is empty.</div>\r\n    }\r\n\r\n    if (error) {\r\n        return <div className=\"text-red-500\">Error: {error}</div>\r\n    }\r\n\r\n    const appearance = {\r\n        theme: 'stripe' as const,\r\n    };\r\n    const options = {\r\n        clientSecret,\r\n        appearance,\r\n    };\r\n\r\n    return (\r\n        <div className=\"App\">\r\n            {clientSecret ? (\r\n                <Elements options={options} stripe={stripePromise}>\r\n                    <CheckoutForm />\r\n                </Elements>\r\n            ) : (\r\n                <div className=\"flex justify-center items-center h-40\">\r\n                    <Loader2 className=\"h-8 w-8 animate-spin text-primary\" />\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;AAWiC;;AATjC;AACA;AAAA;AACA;AACA;AACA;AACA;;;AAPA;;;;;;;AASA,wEAAwE;AACxE,gDAAgD;AAChD,MAAM,gBAAgB,IAAA,2KAAU;AAEjB,SAAS;;IACpB,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,yKAAQ,EAAC;IACjD,MAAM,EAAE,KAAK,EAAE,GAAG,IAAA,4IAAO;IACzB,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAC;IAEnC,IAAA,0KAAS;2CAAC;YACN,IAAI,MAAM,KAAK,CAAC,MAAM,KAAK,GAAG;YAE9B,iDAAiD;YACjD,MAAM,8BAA8B;gBAChC,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;oBAAE,OAAO,MAAM,KAAK,CAAC,GAAG;2DAAC,CAAA,IAAK,CAAC;gCAAE,IAAI,EAAE,OAAO,CAAC,EAAE;gCAAE,UAAU,EAAE,QAAQ;4BAAC,CAAC;;gBAAG;YACrG,GACK,IAAI;mDAAC,CAAC;oBACH,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM;oBAC7B,OAAO,IAAI,IAAI;gBACnB;kDACC,IAAI;mDAAC,CAAC,OAAS,gBAAgB,KAAK,YAAY;kDAChD,KAAK;mDAAC,CAAC,MAAQ,SAAS,IAAI,OAAO;;QAC5C;0CAAG;QAAC,MAAM,KAAK;KAAC;IAEhB,IAAI,MAAM,KAAK,CAAC,MAAM,KAAK,GAAG;QAC1B,qBAAO,6LAAC;sBAAI;;;;;;IAChB;IAEA,IAAI,OAAO;QACP,qBAAO,6LAAC;YAAI,WAAU;;gBAAe;gBAAQ;;;;;;;IACjD;IAEA,MAAM,aAAa;QACf,OAAO;IACX;IACA,MAAM,UAAU;QACZ;QACA;IACJ;IAEA,qBACI,6LAAC;QAAI,WAAU;kBACV,6BACG,6LAAC,mMAAQ;YAAC,SAAS;YAAS,QAAQ;sBAChC,cAAA,6LAAC,qKAAY;;;;;;;;;iCAGjB,6LAAC;YAAI,WAAU;sBACX,cAAA,6LAAC,+NAAO;gBAAC,WAAU;;;;;;;;;;;;;;;;AAKvC;GAnDwB;;QAEF,4IAAO;;;KAFL","debugId":null}},
    {"offset": {"line": 301, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/manav/studio/src/app/checkout/page.tsx"],"sourcesContent":["\"use client\";\n\nimport Link from \"next/link\";\nimport { ChevronLeft } from \"lucide-react\";\nimport { CartItems } from \"@/components/cart/cart-items\";\nimport { useCart } from \"@/lib/cart-context\";\nimport { Separator } from \"@/components/ui/separator\";\nimport StripeElementsWrapper from \"@/components/checkout/stripe-elements-wrapper\";\n\nexport default function CheckoutPage() {\n  const { cartTotal } = useCart();\n\n  return (\n    <div className=\"container mx-auto px-4 py-8 max-w-6xl\">\n      <Link\n        href=\"/\"\n        className=\"inline-flex items-center text-sm text-muted-foreground hover:text-foreground mb-6 transition-colors\"\n      >\n        <ChevronLeft className=\"mr-2 h-4 w-4\" />\n        Back to shopping\n      </Link>\n\n      <h1 className=\"text-3xl font-bold mb-10\">Checkout</h1>\n\n      <div className=\"grid lg:grid-cols-2 gap-12\">\n        <div className=\"space-y-8 order-2 lg:order-1\">\n          <section>\n            <h2 className=\"text-xl font-semibold mb-6 flex items-center gap-2\">\n              <span className=\"flex items-center justify-center w-6 h-6 rounded-full bg-primary text-primary-foreground text-xs font-bold\">1</span>\n              Payment Details\n            </h2>\n            <div className=\"bg-muted/30 p-6 rounded-xl border\">\n              <StripeElementsWrapper />\n            </div>\n          </section>\n        </div>\n\n        <div className=\"order-1 lg:order-2\">\n          <div className=\"bg-card border rounded-xl p-6 sticky top-24\">\n            <h2 className=\"text-xl font-semibold mb-6\">Order Summary</h2>\n            <div className=\"max-h-[400px] overflow-y-auto pr-2 mb-6\">\n              <CartItems />\n            </div>\n\n            <Separator className=\"my-6\" />\n\n            <div className=\"space-y-4\">\n              <div className=\"flex justify-between text-base\">\n                <span className=\"text-muted-foreground\">Subtotal</span>\n                <span>${cartTotal.toFixed(2)}</span>\n              </div>\n              <div className=\"flex justify-between text-base\">\n                <span className=\"text-muted-foreground\">Shipping</span>\n                <span className=\"text-green-600 font-medium\">Free</span>\n              </div>\n              <Separator />\n              <div className=\"flex justify-between text-xl font-bold pt-2\">\n                <span>Total</span>\n                <span>${cartTotal.toFixed(2)}</span>\n              </div>\n            </div>\n\n            <div className=\"mt-8 text-center text-xs text-muted-foreground\">\n              <p>Secure SSL Encrypted Payment</p>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAPA;;;;;;;AASe,SAAS;;IACtB,MAAM,EAAE,SAAS,EAAE,GAAG,IAAA,4IAAO;IAE7B,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC,0KAAI;gBACH,MAAK;gBACL,WAAU;;kCAEV,6LAAC,sOAAW;wBAAC,WAAU;;;;;;oBAAiB;;;;;;;0BAI1C,6LAAC;gBAAG,WAAU;0BAA2B;;;;;;0BAEzC,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;kCACb,cAAA,6LAAC;;8CACC,6LAAC;oCAAG,WAAU;;sDACZ,6LAAC;4CAAK,WAAU;sDAA6G;;;;;;wCAAQ;;;;;;;8CAGvI,6LAAC;oCAAI,WAAU;8CACb,cAAA,6LAAC,6KAAqB;;;;;;;;;;;;;;;;;;;;;kCAK5B,6LAAC;wBAAI,WAAU;kCACb,cAAA,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCAAG,WAAU;8CAA6B;;;;;;8CAC3C,6LAAC;oCAAI,WAAU;8CACb,cAAA,6LAAC,2JAAS;;;;;;;;;;8CAGZ,6LAAC,qJAAS;oCAAC,WAAU;;;;;;8CAErB,6LAAC;oCAAI,WAAU;;sDACb,6LAAC;4CAAI,WAAU;;8DACb,6LAAC;oDAAK,WAAU;8DAAwB;;;;;;8DACxC,6LAAC;;wDAAK;wDAAE,UAAU,OAAO,CAAC;;;;;;;;;;;;;sDAE5B,6LAAC;4CAAI,WAAU;;8DACb,6LAAC;oDAAK,WAAU;8DAAwB;;;;;;8DACxC,6LAAC;oDAAK,WAAU;8DAA6B;;;;;;;;;;;;sDAE/C,6LAAC,qJAAS;;;;;sDACV,6LAAC;4CAAI,WAAU;;8DACb,6LAAC;8DAAK;;;;;;8DACN,6LAAC;;wDAAK;wDAAE,UAAU,OAAO,CAAC;;;;;;;;;;;;;;;;;;;8CAI9B,6LAAC;oCAAI,WAAU;8CACb,cAAA,6LAAC;kDAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOjB;GA7DwB;;QACA,4IAAO;;;KADP","debugId":null}}]
}