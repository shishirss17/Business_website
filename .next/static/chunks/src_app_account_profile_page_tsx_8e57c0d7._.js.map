{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/manav/studio/src/app/account/profile/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useSession } from \"next-auth/react\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Separator } from \"@/components/ui/separator\";\r\nimport { useToast } from \"@/hooks/use-toast\";\r\nimport { Loader2 } from \"lucide-react\";\r\n\r\nexport default function ProfilePage() {\r\n    const { data: session, update } = useSession();\r\n    const { toast } = useToast();\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    const [isSaving, setIsSaving] = useState(false);\r\n    const [isChangingPassword, setIsChangingPassword] = useState(false);\r\n\r\n    const [profile, setProfile] = useState({\r\n        name: \"\",\r\n        email: \"\",\r\n        phoneNumber: \"\"\r\n    });\r\n\r\n    const [passwords, setPasswords] = useState({\r\n        oldPassword: \"\",\r\n        newPassword: \"\",\r\n        confirmPassword: \"\"\r\n    });\r\n\r\n    useEffect(() => {\r\n        async function fetchProfile() {\r\n            try {\r\n                const res = await fetch(\"/api/user/profile\");\r\n                if (res.ok) {\r\n                    const data = await res.json();\r\n                    setProfile({\r\n                        name: data.name || \"\",\r\n                        email: data.email || \"\",\r\n                        phoneNumber: data.phoneNumber || \"\"\r\n                    });\r\n                }\r\n            } catch (error) {\r\n                console.error(\"Fetch Profile Error:\", error);\r\n            } finally {\r\n                setIsLoading(false);\r\n            }\r\n        }\r\n        fetchProfile();\r\n    }, []);\r\n\r\n    const handleSaveProfile = async () => {\r\n        setIsSaving(true);\r\n        try {\r\n            const res = await fetch(\"/api/user/profile\", {\r\n                method: \"POST\",\r\n                headers: { \"Content-Type\": \"application/json\" },\r\n                body: JSON.stringify({\r\n                    name: profile.name,\r\n                    phoneNumber: profile.phoneNumber\r\n                })\r\n            });\r\n\r\n            if (res.ok) {\r\n                toast({ title: \"Success\", description: \"Profile updated successfully.\" });\r\n                await update(); // Update session with new name\r\n            } else {\r\n                const error = await res.json();\r\n                toast({ title: \"Error\", description: error.error || \"Failed to update profile.\", variant: \"destructive\" });\r\n            }\r\n        } catch (error) {\r\n            toast({ title: \"Error\", description: \"Something went wrong.\", variant: \"destructive\" });\r\n        } finally {\r\n            setIsSaving(false);\r\n        }\r\n    };\r\n\r\n    const handleChangePassword = async () => {\r\n        if (passwords.newPassword !== passwords.confirmPassword) {\r\n            toast({ title: \"Error\", description: \"Passwords do not match.\", variant: \"destructive\" });\r\n            return;\r\n        }\r\n\r\n        setIsChangingPassword(true);\r\n        try {\r\n            const res = await fetch(\"/api/user/change-password\", {\r\n                method: \"POST\",\r\n                headers: { \"Content-Type\": \"application/json\" },\r\n                body: JSON.stringify({\r\n                    oldPassword: passwords.oldPassword,\r\n                    newPassword: passwords.newPassword\r\n                })\r\n            });\r\n\r\n            if (res.ok) {\r\n                toast({ title: \"Success\", description: \"Password changed successfully.\" });\r\n                setPasswords({ oldPassword: \"\", newPassword: \"\", confirmPassword: \"\" });\r\n            } else {\r\n                const error = await res.json();\r\n                toast({ title: \"Error\", description: error.error || \"Failed to change password.\", variant: \"destructive\" });\r\n            }\r\n        } catch (error) {\r\n            toast({ title: \"Error\", description: \"Something went wrong.\", variant: \"destructive\" });\r\n        } finally {\r\n            setIsChangingPassword(false);\r\n        }\r\n    };\r\n\r\n    if (isLoading) {\r\n        return (\r\n            <div className=\"flex items-center justify-center p-12\">\r\n                <Loader2 className=\"h-8 w-8 animate-spin text-muted-foreground\" />\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            <div>\r\n                <h2 className=\"text-2xl font-bold\">Profile Information</h2>\r\n                <p className=\"text-muted-foreground\">Manage your personal details and account settings.</p>\r\n            </div>\r\n            <Separator />\r\n\r\n            <div className=\"grid gap-6\">\r\n                <div className=\"grid gap-2\">\r\n                    <Label htmlFor=\"name\">Full Name</Label>\r\n                    <Input\r\n                        id=\"name\"\r\n                        value={profile.name}\r\n                        onChange={(e) => setProfile({ ...profile, name: e.target.value })}\r\n                        placeholder=\"Enter your full name\"\r\n                    />\r\n                </div>\r\n\r\n                <div className=\"grid gap-2\">\r\n                    <Label htmlFor=\"email\">Email Address</Label>\r\n                    <Input id=\"email\" type=\"email\" value={profile.email} disabled className=\"bg-muted cursor-not-allowed\" />\r\n                    <p className=\"text-xs text-muted-foreground\">Your email cannot be changed.</p>\r\n                </div>\r\n\r\n                <div className=\"grid gap-2\">\r\n                    <Label htmlFor=\"phone\">Phone Number</Label>\r\n                    <Input\r\n                        id=\"phone\"\r\n                        type=\"tel\"\r\n                        value={profile.phoneNumber}\r\n                        onChange={(e) => setProfile({ ...profile, phoneNumber: e.target.value })}\r\n                        placeholder=\"Add your phone number\"\r\n                    />\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"pt-4\">\r\n                <Button onClick={handleSaveProfile} disabled={isSaving} className=\"w-full sm:w-auto\">\r\n                    {isSaving && <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />}\r\n                    Save Changes\r\n                </Button>\r\n            </div>\r\n\r\n            <Separator className=\"my-8\" />\r\n\r\n            <div>\r\n                <h2 className=\"text-2xl font-bold\">Security</h2>\r\n                <p className=\"text-muted-foreground\">Update your password to keep your account secure.</p>\r\n            </div>\r\n            <Separator />\r\n\r\n            <div className=\"grid gap-6\">\r\n                <div className=\"grid gap-2\">\r\n                    <Label htmlFor=\"old-password\">Current Password</Label>\r\n                    <Input\r\n                        id=\"old-password\"\r\n                        type=\"password\"\r\n                        value={passwords.oldPassword}\r\n                        onChange={(e) => setPasswords({ ...passwords, oldPassword: e.target.value })}\r\n                        placeholder=\"••••••••\"\r\n                    />\r\n                </div>\r\n                <div className=\"grid gap-6 sm:grid-cols-2\">\r\n                    <div className=\"grid gap-2\">\r\n                        <Label htmlFor=\"new-password\">New Password</Label>\r\n                        <Input\r\n                            id=\"new-password\"\r\n                            type=\"password\"\r\n                            value={passwords.newPassword}\r\n                            onChange={(e) => setPasswords({ ...passwords, newPassword: e.target.value })}\r\n                            placeholder=\"••••••••\"\r\n                        />\r\n                    </div>\r\n                    <div className=\"grid gap-2\">\r\n                        <Label htmlFor=\"confirm-password\">Confirm New Password</Label>\r\n                        <Input\r\n                            id=\"confirm-password\"\r\n                            type=\"password\"\r\n                            value={passwords.confirmPassword}\r\n                            onChange={(e) => setPasswords({ ...passwords, confirmPassword: e.target.value })}\r\n                            placeholder=\"••••••••\"\r\n                        />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"pt-4\">\r\n                <Button variant=\"outline\" onClick={handleChangePassword} disabled={isChangingPassword} className=\"w-full sm:w-auto\">\r\n                    {isChangingPassword && <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />}\r\n                    Update Password\r\n                </Button>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}