{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 23, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/auth.config.ts"],"sourcesContent":["import type { NextAuthConfig } from \"next-auth\"\r\n\r\nexport const authConfig = {\r\n    pages: {\r\n        signIn: '/login',\r\n    },\r\n    callbacks: {\r\n        /*authorized({ auth, request: { nextUrl } }) {\r\n          const isLoggedIn = !!auth?.user;\r\n          const isOnDashboard = nextUrl.pathname.startsWith('/dashboard');\r\n          if (isOnDashboard) {\r\n            if (isLoggedIn) return true;\r\n            return false; // Redirect unauthenticated users to login page\r\n          }\r\n          return true;\r\n        },*/\r\n        async jwt({ token, user }) {\r\n            if (user) {\r\n                token.phoneNumber = (user as any).phoneNumber;\r\n                token.role = (user as any).role;\r\n                token.id = user.id;\r\n            }\r\n            return token;\r\n        },\r\n        async session({ session, token }) {\r\n            if (session.user) {\r\n                (session.user as any).phoneNumber = token.phoneNumber;\r\n                (session.user as any).role = token.role;\r\n                (session.user as any).id = token.id;\r\n            }\r\n            return session;\r\n        },\r\n    },\r\n    providers: [],\r\n    session: {\r\n        strategy: \"jwt\",\r\n    },\r\n} satisfies NextAuthConfig\r\n"],"names":[],"mappings":";;;AAEO,MAAM,aAAa;IACtB,OAAO;QACH,QAAQ;IACZ;IACA,WAAW;QACP;;;;;;;;UAQE,GACF,MAAM,KAAI,EAAE,KAAK,EAAE,IAAI,EAAE;YACrB,IAAI,MAAM;gBACN,MAAM,WAAW,GAAG,AAAC,KAAa,WAAW;gBAC7C,MAAM,IAAI,GAAG,AAAC,KAAa,IAAI;gBAC/B,MAAM,EAAE,GAAG,KAAK,EAAE;YACtB;YACA,OAAO;QACX;QACA,MAAM,SAAQ,EAAE,OAAO,EAAE,KAAK,EAAE;YAC5B,IAAI,QAAQ,IAAI,EAAE;gBACb,QAAQ,IAAI,CAAS,WAAW,GAAG,MAAM,WAAW;gBACpD,QAAQ,IAAI,CAAS,IAAI,GAAG,MAAM,IAAI;gBACtC,QAAQ,IAAI,CAAS,EAAE,GAAG,MAAM,EAAE;YACvC;YACA,OAAO;QACX;IACJ;IACA,WAAW,EAAE;IACb,SAAS;QACL,UAAU;IACd;AACJ"}},
    {"offset": {"line": 67, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/middleware.ts"],"sourcesContent":["import NextAuth from \"next-auth\"\r\nimport { authConfig } from \"./auth.config\"\r\nimport { NextResponse } from 'next/server';\r\nimport type { NextRequest } from 'next/server';\r\n\r\nconst authMiddleware = NextAuth(authConfig).auth;\r\n\r\nexport default async function middleware(request: NextRequest) {\r\n    const { pathname } = request.nextUrl;\r\n\r\n    // First run the auth middleware\r\n    const authResult = await authMiddleware(request as any);\r\n\r\n    // If auth middleware returned a response, use it\r\n    if (authResult) {\r\n        return authResult;\r\n    }\r\n\r\n    // Additional check for admin routes\r\n    if (pathname.startsWith('/admin')) {\r\n        // Get the session from the request\r\n        const session = (request as any).auth;\r\n\r\n        // Check if user is logged in\r\n        if (!session || !session.user) {\r\n            return NextResponse.redirect(new URL('/', request.url));\r\n        }\r\n\r\n        // Check if user has admin role\r\n        const userRole = (session.user as any).role;\r\n        if (userRole !== 'admin') {\r\n            return NextResponse.redirect(new URL('/', request.url));\r\n        }\r\n    }\r\n\r\n    return NextResponse.next();\r\n}\r\n\r\nexport const config = {\r\n    // https://nextjs.org/docs/app/building-your-application/routing/middleware#matcher\r\n    matcher: ['/((?!api|_next/static|_next/image|.*\\\\.png$).*)'],\r\n};\r\n"],"names":[],"mappings":";;;;AAAA;AAAA;AACA;AACA;AAAA;;;;AAGA,MAAM,iBAAiB,CAAA,GAAA,6JAAA,CAAA,UAAQ,AAAD,EAAE,6HAAA,CAAA,aAAU,EAAE,IAAI;AAEjC,eAAe,WAAW,OAAoB;IACzD,MAAM,EAAE,QAAQ,EAAE,GAAG,QAAQ,OAAO;IAEpC,gCAAgC;IAChC,MAAM,aAAa,MAAM,eAAe;IAExC,iDAAiD;IACjD,IAAI,YAAY;QACZ,OAAO;IACX;IAEA,oCAAoC;IACpC,IAAI,SAAS,UAAU,CAAC,WAAW;QAC/B,mCAAmC;QACnC,MAAM,UAAU,AAAC,QAAgB,IAAI;QAErC,6BAA6B;QAC7B,IAAI,CAAC,WAAW,CAAC,QAAQ,IAAI,EAAE;YAC3B,OAAO,6LAAA,CAAA,eAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,KAAK,QAAQ,GAAG;QACzD;QAEA,+BAA+B;QAC/B,MAAM,WAAW,AAAC,QAAQ,IAAI,CAAS,IAAI;QAC3C,IAAI,aAAa,SAAS;YACtB,OAAO,6LAAA,CAAA,eAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,KAAK,QAAQ,GAAG;QACzD;IACJ;IAEA,OAAO,6LAAA,CAAA,eAAY,CAAC,IAAI;AAC5B;AAEO,MAAM,SAAS;IAClB,mFAAmF;IACnF,SAAS;QAAC;KAAkD;AAChE"}}]
}